---
apiVersion: apiextensions.k8s.io/v1
kind: CustomResourceDefinition
metadata:
  annotations:
    controller-gen.kubebuilder.io/version: v0.20.0
  name: dataflows.dataflow.dataflow.io
spec:
  group: dataflow.dataflow.io
  names:
    kind: DataFlow
    listKind: DataFlowList
    plural: dataflows
    singular: dataflow
  scope: Namespaced
  versions:
  - name: v1
    schema:
      openAPIV3Schema:
        description: DataFlow is the Schema for the dataflows API
        properties:
          apiVersion:
            description: |-
              APIVersion defines the versioned schema of this representation of an object.
              Servers should convert recognized schemas to the latest internal value, and
              may reject unrecognized values.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#resources
            type: string
          kind:
            description: |-
              Kind is a string value representing the REST resource this object represents.
              Servers may infer this from the endpoint the client submits requests to.
              Cannot be updated.
              In CamelCase.
              More info: https://git.k8s.io/community/contributors/devel/sig-architecture/api-conventions.md#types-kinds
            type: string
          metadata:
            type: object
          spec:
            description: DataFlowSpec defines the desired state of DataFlow
            properties:
              sink:
                description: Sink defines the destination of data
                properties:
                  kafka:
                    description: Kafka sink configuration
                    properties:
                      brokers:
                        description: Brokers is a list of Kafka broker addresses
                        items:
                          type: string
                        type: array
                      brokersSecretRef:
                        description: BrokersSecretRef references a Kubernetes secret
                          for brokers (comma-separated)
                        properties:
                          key:
                            description: Key in the secret to read the value from
                            type: string
                          name:
                            description: Name of the secret
                            type: string
                          namespace:
                            description: Namespace of the secret (optional, defaults
                              to the same namespace as DataFlow)
                            type: string
                        required:
                        - key
                        - name
                        type: object
                      sasl:
                        description: SASL configuration
                        properties:
                          mechanism:
                            description: 'Mechanism: plain, scram-sha-256, scram-sha-512'
                            type: string
                          password:
                            description: Password (optional if PasswordSecretRef is
                              provided)
                            type: string
                          passwordSecretRef:
                            description: PasswordSecretRef references a Kubernetes
                              secret for password
                            properties:
                              key:
                                description: Key in the secret to read the value from
                                type: string
                              name:
                                description: Name of the secret
                                type: string
                              namespace:
                                description: Namespace of the secret (optional, defaults
                                  to the same namespace as DataFlow)
                                type: string
                            required:
                            - key
                            - name
                            type: object
                          username:
                            description: Username (optional if UsernameSecretRef is
                              provided)
                            type: string
                          usernameSecretRef:
                            description: UsernameSecretRef references a Kubernetes
                              secret for username
                            properties:
                              key:
                                description: Key in the secret to read the value from
                                type: string
                              name:
                                description: Name of the secret
                                type: string
                              namespace:
                                description: Namespace of the secret (optional, defaults
                                  to the same namespace as DataFlow)
                                type: string
                            required:
                            - key
                            - name
                            type: object
                        required:
                        - mechanism
                        type: object
                      tls:
                        description: TLS configuration
                        properties:
                          caFile:
                            description: CAFile path to CA certificate file
                            type: string
                          caSecretRef:
                            description: CASecretRef references a Kubernetes secret
                              for CA certificate
                            properties:
                              key:
                                description: Key in the secret to read the value from
                                type: string
                              name:
                                description: Name of the secret
                                type: string
                              namespace:
                                description: Namespace of the secret (optional, defaults
                                  to the same namespace as DataFlow)
                                type: string
                            required:
                            - key
                            - name
                            type: object
                          certFile:
                            description: CertFile path to certificate file
                            type: string
                          certSecretRef:
                            description: CertSecretRef references a Kubernetes secret
                              for certificate
                            properties:
                              key:
                                description: Key in the secret to read the value from
                                type: string
                              name:
                                description: Name of the secret
                                type: string
                              namespace:
                                description: Namespace of the secret (optional, defaults
                                  to the same namespace as DataFlow)
                                type: string
                            required:
                            - key
                            - name
                            type: object
                          insecureSkipVerify:
                            description: InsecureSkipVerify skips certificate verification
                            type: boolean
                          keyFile:
                            description: KeyFile path to key file
                            type: string
                          keySecretRef:
                            description: KeySecretRef references a Kubernetes secret
                              for key
                            properties:
                              key:
                                description: Key in the secret to read the value from
                                type: string
                              name:
                                description: Name of the secret
                                type: string
                              namespace:
                                description: Namespace of the secret (optional, defaults
                                  to the same namespace as DataFlow)
                                type: string
                            required:
                            - key
                            - name
                            type: object
                        type: object
                      topic:
                        description: Topic to write to
                        type: string
                      topicSecretRef:
                        description: TopicSecretRef references a Kubernetes secret
                          for topic
                        properties:
                          key:
                            description: Key in the secret to read the value from
                            type: string
                          name:
                            description: Name of the secret
                            type: string
                          namespace:
                            description: Namespace of the secret (optional, defaults
                              to the same namespace as DataFlow)
                            type: string
                        required:
                        - key
                        - name
                        type: object
                    required:
                    - brokers
                    - topic
                    type: object
                  postgresql:
                    description: PostgreSQL sink configuration
                    properties:
                      autoCreateTable:
                        description: AutoCreateTable automatically creates the table
                          if it doesn't exist
                        type: boolean
                      batchSize:
                        description: BatchSize for batch inserts
                        format: int32
                        type: integer
                      connectionString:
                        description: ConnectionString for PostgreSQL database
                        type: string
                      connectionStringSecretRef:
                        description: ConnectionStringSecretRef references a Kubernetes
                          secret for connection string
                        properties:
                          key:
                            description: Key in the secret to read the value from
                            type: string
                          name:
                            description: Name of the secret
                            type: string
                          namespace:
                            description: Namespace of the secret (optional, defaults
                              to the same namespace as DataFlow)
                            type: string
                        required:
                        - key
                        - name
                        type: object
                      table:
                        description: Table to write to
                        type: string
                      tableSecretRef:
                        description: TableSecretRef references a Kubernetes secret
                          for table name
                        properties:
                          key:
                            description: Key in the secret to read the value from
                            type: string
                          name:
                            description: Name of the secret
                            type: string
                          namespace:
                            description: Namespace of the secret (optional, defaults
                              to the same namespace as DataFlow)
                            type: string
                        required:
                        - key
                        - name
                        type: object
                    required:
                    - connectionString
                    - table
                    type: object
                  trino:
                    description: Trino sink configuration
                    properties:
                      autoCreateTable:
                        description: AutoCreateTable automatically creates the table
                          if it doesn't exist
                        type: boolean
                      batchSize:
                        description: BatchSize for batch inserts
                        format: int32
                        type: integer
                      catalog:
                        description: Catalog to use
                        type: string
                      catalogSecretRef:
                        description: CatalogSecretRef references a Kubernetes secret
                          for catalog name
                        properties:
                          key:
                            description: Key in the secret to read the value from
                            type: string
                          name:
                            description: Name of the secret
                            type: string
                          namespace:
                            description: Namespace of the secret (optional, defaults
                              to the same namespace as DataFlow)
                            type: string
                        required:
                        - key
                        - name
                        type: object
                      keycloak:
                        description: Keycloak authentication configuration
                        properties:
                          clientID:
                            description: ClientID is the OAuth2 client ID
                            type: string
                          clientIDSecretRef:
                            description: ClientIDSecretRef references a Kubernetes
                              secret for client ID
                            properties:
                              key:
                                description: Key in the secret to read the value from
                                type: string
                              name:
                                description: Name of the secret
                                type: string
                              namespace:
                                description: Namespace of the secret (optional, defaults
                                  to the same namespace as DataFlow)
                                type: string
                            required:
                            - key
                            - name
                            type: object
                          clientSecret:
                            description: ClientSecret is the OAuth2 client secret
                              (optional if ClientSecretSecretRef is provided)
                            type: string
                          clientSecretSecretRef:
                            description: ClientSecretSecretRef references a Kubernetes
                              secret for client secret
                            properties:
                              key:
                                description: Key in the secret to read the value from
                                type: string
                              name:
                                description: Name of the secret
                                type: string
                              namespace:
                                description: Namespace of the secret (optional, defaults
                                  to the same namespace as DataFlow)
                                type: string
                            required:
                            - key
                            - name
                            type: object
                          password:
                            description: Password for password grant (optional if
                              PasswordSecretRef is provided)
                            type: string
                          passwordSecretRef:
                            description: PasswordSecretRef references a Kubernetes
                              secret for password
                            properties:
                              key:
                                description: Key in the secret to read the value from
                                type: string
                              name:
                                description: Name of the secret
                                type: string
                              namespace:
                                description: Namespace of the secret (optional, defaults
                                  to the same namespace as DataFlow)
                                type: string
                            required:
                            - key
                            - name
                            type: object
                          realm:
                            description: Realm is the Keycloak realm name
                            type: string
                          realmSecretRef:
                            description: RealmSecretRef references a Kubernetes secret
                              for realm name
                            properties:
                              key:
                                description: Key in the secret to read the value from
                                type: string
                              name:
                                description: Name of the secret
                                type: string
                              namespace:
                                description: Namespace of the secret (optional, defaults
                                  to the same namespace as DataFlow)
                                type: string
                            required:
                            - key
                            - name
                            type: object
                          serverURL:
                            description: ServerURL is the Keycloak server URL (e.g.,
                              https://keycloak.example.com/auth)
                            type: string
                          serverURLSecretRef:
                            description: ServerURLSecretRef references a Kubernetes
                              secret for Keycloak server URL
                            properties:
                              key:
                                description: Key in the secret to read the value from
                                type: string
                              name:
                                description: Name of the secret
                                type: string
                              namespace:
                                description: Namespace of the secret (optional, defaults
                                  to the same namespace as DataFlow)
                                type: string
                            required:
                            - key
                            - name
                            type: object
                          token:
                            description: |-
                              Token is a long-lived OAuth2 token obtained from Keycloak (optional if TokenSecretRef is provided)
                              If provided, this token will be used directly instead of OAuth2 flow
                            type: string
                          tokenSecretRef:
                            description: |-
                              TokenSecretRef references a Kubernetes secret for OAuth2 token
                              If provided, this token will be used directly instead of OAuth2 flow
                            properties:
                              key:
                                description: Key in the secret to read the value from
                                type: string
                              name:
                                description: Name of the secret
                                type: string
                              namespace:
                                description: Namespace of the secret (optional, defaults
                                  to the same namespace as DataFlow)
                                type: string
                            required:
                            - key
                            - name
                            type: object
                          username:
                            description: Username for password grant (optional if
                              UsernameSecretRef is provided)
                            type: string
                          usernameSecretRef:
                            description: UsernameSecretRef references a Kubernetes
                              secret for username
                            properties:
                              key:
                                description: Key in the secret to read the value from
                                type: string
                              name:
                                description: Name of the secret
                                type: string
                              namespace:
                                description: Namespace of the secret (optional, defaults
                                  to the same namespace as DataFlow)
                                type: string
                            required:
                            - key
                            - name
                            type: object
                        required:
                        - clientID
                        - realm
                        - serverURL
                        type: object
                      schema:
                        description: Schema to use
                        type: string
                      schemaSecretRef:
                        description: SchemaSecretRef references a Kubernetes secret
                          for schema name
                        properties:
                          key:
                            description: Key in the secret to read the value from
                            type: string
                          name:
                            description: Name of the secret
                            type: string
                          namespace:
                            description: Namespace of the secret (optional, defaults
                              to the same namespace as DataFlow)
                            type: string
                        required:
                        - key
                        - name
                        type: object
                      serverURL:
                        description: ServerURL is the Trino server URL (e.g., http://trino:8080)
                        type: string
                      serverURLSecretRef:
                        description: ServerURLSecretRef references a Kubernetes secret
                          for server URL
                        properties:
                          key:
                            description: Key in the secret to read the value from
                            type: string
                          name:
                            description: Name of the secret
                            type: string
                          namespace:
                            description: Namespace of the secret (optional, defaults
                              to the same namespace as DataFlow)
                            type: string
                        required:
                        - key
                        - name
                        type: object
                      table:
                        description: Table to write to
                        type: string
                      tableSecretRef:
                        description: TableSecretRef references a Kubernetes secret
                          for table name
                        properties:
                          key:
                            description: Key in the secret to read the value from
                            type: string
                          name:
                            description: Name of the secret
                            type: string
                          namespace:
                            description: Namespace of the secret (optional, defaults
                              to the same namespace as DataFlow)
                            type: string
                        required:
                        - key
                        - name
                        type: object
                    required:
                    - catalog
                    - schema
                    - serverURL
                    - table
                    type: object
                  type:
                    description: 'Type of sink: kafka, postgresql'
                    type: string
                required:
                - type
                type: object
              source:
                description: Source defines the source of data
                properties:
                  kafka:
                    description: Kafka source configuration
                    properties:
                      avroSchema:
                        description: AvroSchema is the Avro schema as JSON string
                          (required if format is "avro")
                        type: string
                      avroSchemaFile:
                        description: AvroSchemaFile is the path to a file containing
                          the Avro schema (alternative to avroSchema)
                        type: string
                      avroSchemaSecretRef:
                        description: AvroSchemaSecretRef references a Kubernetes secret
                          for Avro schema
                        properties:
                          key:
                            description: Key in the secret to read the value from
                            type: string
                          name:
                            description: Name of the secret
                            type: string
                          namespace:
                            description: Namespace of the secret (optional, defaults
                              to the same namespace as DataFlow)
                            type: string
                        required:
                        - key
                        - name
                        type: object
                      brokers:
                        description: Brokers is a list of Kafka broker addresses
                        items:
                          type: string
                        type: array
                      brokersSecretRef:
                        description: BrokersSecretRef references a Kubernetes secret
                          for brokers (comma-separated)
                        properties:
                          key:
                            description: Key in the secret to read the value from
                            type: string
                          name:
                            description: Name of the secret
                            type: string
                          namespace:
                            description: Namespace of the secret (optional, defaults
                              to the same namespace as DataFlow)
                            type: string
                        required:
                        - key
                        - name
                        type: object
                      consumerGroup:
                        description: ConsumerGroup for Kafka consumer
                        type: string
                      consumerGroupSecretRef:
                        description: ConsumerGroupSecretRef references a Kubernetes
                          secret for consumer group
                        properties:
                          key:
                            description: Key in the secret to read the value from
                            type: string
                          name:
                            description: Name of the secret
                            type: string
                          namespace:
                            description: Namespace of the secret (optional, defaults
                              to the same namespace as DataFlow)
                            type: string
                        required:
                        - key
                        - name
                        type: object
                      format:
                        description: 'Format specifies the message format: "json"
                          (default) or "avro"'
                        type: string
                      sasl:
                        description: SASL configuration
                        properties:
                          mechanism:
                            description: 'Mechanism: plain, scram-sha-256, scram-sha-512'
                            type: string
                          password:
                            description: Password (optional if PasswordSecretRef is
                              provided)
                            type: string
                          passwordSecretRef:
                            description: PasswordSecretRef references a Kubernetes
                              secret for password
                            properties:
                              key:
                                description: Key in the secret to read the value from
                                type: string
                              name:
                                description: Name of the secret
                                type: string
                              namespace:
                                description: Namespace of the secret (optional, defaults
                                  to the same namespace as DataFlow)
                                type: string
                            required:
                            - key
                            - name
                            type: object
                          username:
                            description: Username (optional if UsernameSecretRef is
                              provided)
                            type: string
                          usernameSecretRef:
                            description: UsernameSecretRef references a Kubernetes
                              secret for username
                            properties:
                              key:
                                description: Key in the secret to read the value from
                                type: string
                              name:
                                description: Name of the secret
                                type: string
                              namespace:
                                description: Namespace of the secret (optional, defaults
                                  to the same namespace as DataFlow)
                                type: string
                            required:
                            - key
                            - name
                            type: object
                        required:
                        - mechanism
                        type: object
                      schemaRegistry:
                        description: SchemaRegistry configuration for Confluent Schema
                          Registry
                        properties:
                          basicAuth:
                            description: BasicAuth configuration
                            properties:
                              password:
                                description: Password for basic authentication (optional
                                  if PasswordSecretRef is provided)
                                type: string
                              passwordSecretRef:
                                description: PasswordSecretRef references a Kubernetes
                                  secret for password
                                properties:
                                  key:
                                    description: Key in the secret to read the value
                                      from
                                    type: string
                                  name:
                                    description: Name of the secret
                                    type: string
                                  namespace:
                                    description: Namespace of the secret (optional,
                                      defaults to the same namespace as DataFlow)
                                    type: string
                                required:
                                - key
                                - name
                                type: object
                              username:
                                description: Username for basic authentication (optional
                                  if UsernameSecretRef is provided)
                                type: string
                              usernameSecretRef:
                                description: UsernameSecretRef references a Kubernetes
                                  secret for username
                                properties:
                                  key:
                                    description: Key in the secret to read the value
                                      from
                                    type: string
                                  name:
                                    description: Name of the secret
                                    type: string
                                  namespace:
                                    description: Namespace of the secret (optional,
                                      defaults to the same namespace as DataFlow)
                                    type: string
                                required:
                                - key
                                - name
                                type: object
                            type: object
                          tls:
                            description: TLS configuration for Schema Registry
                            properties:
                              caFile:
                                description: CAFile path to CA certificate file
                                type: string
                              caSecretRef:
                                description: CASecretRef references a Kubernetes secret
                                  for CA certificate
                                properties:
                                  key:
                                    description: Key in the secret to read the value
                                      from
                                    type: string
                                  name:
                                    description: Name of the secret
                                    type: string
                                  namespace:
                                    description: Namespace of the secret (optional,
                                      defaults to the same namespace as DataFlow)
                                    type: string
                                required:
                                - key
                                - name
                                type: object
                              certFile:
                                description: CertFile path to certificate file
                                type: string
                              certSecretRef:
                                description: CertSecretRef references a Kubernetes
                                  secret for certificate
                                properties:
                                  key:
                                    description: Key in the secret to read the value
                                      from
                                    type: string
                                  name:
                                    description: Name of the secret
                                    type: string
                                  namespace:
                                    description: Namespace of the secret (optional,
                                      defaults to the same namespace as DataFlow)
                                    type: string
                                required:
                                - key
                                - name
                                type: object
                              insecureSkipVerify:
                                description: InsecureSkipVerify skips certificate
                                  verification
                                type: boolean
                              keyFile:
                                description: KeyFile path to key file
                                type: string
                              keySecretRef:
                                description: KeySecretRef references a Kubernetes
                                  secret for key
                                properties:
                                  key:
                                    description: Key in the secret to read the value
                                      from
                                    type: string
                                  name:
                                    description: Name of the secret
                                    type: string
                                  namespace:
                                    description: Namespace of the secret (optional,
                                      defaults to the same namespace as DataFlow)
                                    type: string
                                required:
                                - key
                                - name
                                type: object
                            type: object
                          url:
                            description: URL is the Schema Registry base URL (e.g.,
                              http://localhost:8081)
                            type: string
                          urlSecretRef:
                            description: URLSecretRef references a Kubernetes secret
                              for Schema Registry URL
                            properties:
                              key:
                                description: Key in the secret to read the value from
                                type: string
                              name:
                                description: Name of the secret
                                type: string
                              namespace:
                                description: Namespace of the secret (optional, defaults
                                  to the same namespace as DataFlow)
                                type: string
                            required:
                            - key
                            - name
                            type: object
                        required:
                        - url
                        type: object
                      tls:
                        description: TLS configuration
                        properties:
                          caFile:
                            description: CAFile path to CA certificate file
                            type: string
                          caSecretRef:
                            description: CASecretRef references a Kubernetes secret
                              for CA certificate
                            properties:
                              key:
                                description: Key in the secret to read the value from
                                type: string
                              name:
                                description: Name of the secret
                                type: string
                              namespace:
                                description: Namespace of the secret (optional, defaults
                                  to the same namespace as DataFlow)
                                type: string
                            required:
                            - key
                            - name
                            type: object
                          certFile:
                            description: CertFile path to certificate file
                            type: string
                          certSecretRef:
                            description: CertSecretRef references a Kubernetes secret
                              for certificate
                            properties:
                              key:
                                description: Key in the secret to read the value from
                                type: string
                              name:
                                description: Name of the secret
                                type: string
                              namespace:
                                description: Namespace of the secret (optional, defaults
                                  to the same namespace as DataFlow)
                                type: string
                            required:
                            - key
                            - name
                            type: object
                          insecureSkipVerify:
                            description: InsecureSkipVerify skips certificate verification
                            type: boolean
                          keyFile:
                            description: KeyFile path to key file
                            type: string
                          keySecretRef:
                            description: KeySecretRef references a Kubernetes secret
                              for key
                            properties:
                              key:
                                description: Key in the secret to read the value from
                                type: string
                              name:
                                description: Name of the secret
                                type: string
                              namespace:
                                description: Namespace of the secret (optional, defaults
                                  to the same namespace as DataFlow)
                                type: string
                            required:
                            - key
                            - name
                            type: object
                        type: object
                      topic:
                        description: Topic to read from
                        type: string
                      topicSecretRef:
                        description: TopicSecretRef references a Kubernetes secret
                          for topic
                        properties:
                          key:
                            description: Key in the secret to read the value from
                            type: string
                          name:
                            description: Name of the secret
                            type: string
                          namespace:
                            description: Namespace of the secret (optional, defaults
                              to the same namespace as DataFlow)
                            type: string
                        required:
                        - key
                        - name
                        type: object
                    required:
                    - brokers
                    - topic
                    type: object
                  postgresql:
                    description: PostgreSQL source configuration
                    properties:
                      connectionString:
                        description: ConnectionString for PostgreSQL database
                        type: string
                      connectionStringSecretRef:
                        description: ConnectionStringSecretRef references a Kubernetes
                          secret for connection string
                        properties:
                          key:
                            description: Key in the secret to read the value from
                            type: string
                          name:
                            description: Name of the secret
                            type: string
                          namespace:
                            description: Namespace of the secret (optional, defaults
                              to the same namespace as DataFlow)
                            type: string
                        required:
                        - key
                        - name
                        type: object
                      pollInterval:
                        description: PollInterval in seconds for polling mode
                        format: int32
                        type: integer
                      query:
                        description: Query for custom SQL query (optional, if not
                          provided, reads from table)
                        type: string
                      table:
                        description: Table to read from
                        type: string
                      tableSecretRef:
                        description: TableSecretRef references a Kubernetes secret
                          for table name
                        properties:
                          key:
                            description: Key in the secret to read the value from
                            type: string
                          name:
                            description: Name of the secret
                            type: string
                          namespace:
                            description: Namespace of the secret (optional, defaults
                              to the same namespace as DataFlow)
                            type: string
                        required:
                        - key
                        - name
                        type: object
                    required:
                    - connectionString
                    - table
                    type: object
                  trino:
                    description: Trino source configuration
                    properties:
                      catalog:
                        description: Catalog to use
                        type: string
                      catalogSecretRef:
                        description: CatalogSecretRef references a Kubernetes secret
                          for catalog name
                        properties:
                          key:
                            description: Key in the secret to read the value from
                            type: string
                          name:
                            description: Name of the secret
                            type: string
                          namespace:
                            description: Namespace of the secret (optional, defaults
                              to the same namespace as DataFlow)
                            type: string
                        required:
                        - key
                        - name
                        type: object
                      keycloak:
                        description: Keycloak authentication configuration
                        properties:
                          clientID:
                            description: ClientID is the OAuth2 client ID
                            type: string
                          clientIDSecretRef:
                            description: ClientIDSecretRef references a Kubernetes
                              secret for client ID
                            properties:
                              key:
                                description: Key in the secret to read the value from
                                type: string
                              name:
                                description: Name of the secret
                                type: string
                              namespace:
                                description: Namespace of the secret (optional, defaults
                                  to the same namespace as DataFlow)
                                type: string
                            required:
                            - key
                            - name
                            type: object
                          clientSecret:
                            description: ClientSecret is the OAuth2 client secret
                              (optional if ClientSecretSecretRef is provided)
                            type: string
                          clientSecretSecretRef:
                            description: ClientSecretSecretRef references a Kubernetes
                              secret for client secret
                            properties:
                              key:
                                description: Key in the secret to read the value from
                                type: string
                              name:
                                description: Name of the secret
                                type: string
                              namespace:
                                description: Namespace of the secret (optional, defaults
                                  to the same namespace as DataFlow)
                                type: string
                            required:
                            - key
                            - name
                            type: object
                          password:
                            description: Password for password grant (optional if
                              PasswordSecretRef is provided)
                            type: string
                          passwordSecretRef:
                            description: PasswordSecretRef references a Kubernetes
                              secret for password
                            properties:
                              key:
                                description: Key in the secret to read the value from
                                type: string
                              name:
                                description: Name of the secret
                                type: string
                              namespace:
                                description: Namespace of the secret (optional, defaults
                                  to the same namespace as DataFlow)
                                type: string
                            required:
                            - key
                            - name
                            type: object
                          realm:
                            description: Realm is the Keycloak realm name
                            type: string
                          realmSecretRef:
                            description: RealmSecretRef references a Kubernetes secret
                              for realm name
                            properties:
                              key:
                                description: Key in the secret to read the value from
                                type: string
                              name:
                                description: Name of the secret
                                type: string
                              namespace:
                                description: Namespace of the secret (optional, defaults
                                  to the same namespace as DataFlow)
                                type: string
                            required:
                            - key
                            - name
                            type: object
                          serverURL:
                            description: ServerURL is the Keycloak server URL (e.g.,
                              https://keycloak.example.com/auth)
                            type: string
                          serverURLSecretRef:
                            description: ServerURLSecretRef references a Kubernetes
                              secret for Keycloak server URL
                            properties:
                              key:
                                description: Key in the secret to read the value from
                                type: string
                              name:
                                description: Name of the secret
                                type: string
                              namespace:
                                description: Namespace of the secret (optional, defaults
                                  to the same namespace as DataFlow)
                                type: string
                            required:
                            - key
                            - name
                            type: object
                          token:
                            description: |-
                              Token is a long-lived OAuth2 token obtained from Keycloak (optional if TokenSecretRef is provided)
                              If provided, this token will be used directly instead of OAuth2 flow
                            type: string
                          tokenSecretRef:
                            description: |-
                              TokenSecretRef references a Kubernetes secret for OAuth2 token
                              If provided, this token will be used directly instead of OAuth2 flow
                            properties:
                              key:
                                description: Key in the secret to read the value from
                                type: string
                              name:
                                description: Name of the secret
                                type: string
                              namespace:
                                description: Namespace of the secret (optional, defaults
                                  to the same namespace as DataFlow)
                                type: string
                            required:
                            - key
                            - name
                            type: object
                          username:
                            description: Username for password grant (optional if
                              UsernameSecretRef is provided)
                            type: string
                          usernameSecretRef:
                            description: UsernameSecretRef references a Kubernetes
                              secret for username
                            properties:
                              key:
                                description: Key in the secret to read the value from
                                type: string
                              name:
                                description: Name of the secret
                                type: string
                              namespace:
                                description: Namespace of the secret (optional, defaults
                                  to the same namespace as DataFlow)
                                type: string
                            required:
                            - key
                            - name
                            type: object
                        required:
                        - clientID
                        - realm
                        - serverURL
                        type: object
                      pollInterval:
                        description: PollInterval in seconds for polling mode
                        format: int32
                        type: integer
                      query:
                        description: Query for custom SQL query (optional, if not
                          provided, reads from table)
                        type: string
                      schema:
                        description: Schema to use
                        type: string
                      schemaSecretRef:
                        description: SchemaSecretRef references a Kubernetes secret
                          for schema name
                        properties:
                          key:
                            description: Key in the secret to read the value from
                            type: string
                          name:
                            description: Name of the secret
                            type: string
                          namespace:
                            description: Namespace of the secret (optional, defaults
                              to the same namespace as DataFlow)
                            type: string
                        required:
                        - key
                        - name
                        type: object
                      serverURL:
                        description: ServerURL is the Trino server URL (e.g., http://trino:8080)
                        type: string
                      serverURLSecretRef:
                        description: ServerURLSecretRef references a Kubernetes secret
                          for server URL
                        properties:
                          key:
                            description: Key in the secret to read the value from
                            type: string
                          name:
                            description: Name of the secret
                            type: string
                          namespace:
                            description: Namespace of the secret (optional, defaults
                              to the same namespace as DataFlow)
                            type: string
                        required:
                        - key
                        - name
                        type: object
                      table:
                        description: Table to read from
                        type: string
                      tableSecretRef:
                        description: TableSecretRef references a Kubernetes secret
                          for table name
                        properties:
                          key:
                            description: Key in the secret to read the value from
                            type: string
                          name:
                            description: Name of the secret
                            type: string
                          namespace:
                            description: Namespace of the secret (optional, defaults
                              to the same namespace as DataFlow)
                            type: string
                        required:
                        - key
                        - name
                        type: object
                    required:
                    - catalog
                    - schema
                    - serverURL
                    - table
                    type: object
                  type:
                    description: 'Type of source: kafka, postgresql'
                    type: string
                required:
                - type
                type: object
              transformations:
                description: Transformations is a list of transformations to apply
                  to messages
                items:
                  description: TransformationSpec defines a transformation to apply
                  properties:
                    camelCase:
                      description: CamelCase transformation configuration
                      properties:
                        deep:
                          description: Deep indicates whether to convert nested objects
                            recursively
                          type: boolean
                      type: object
                    filter:
                      description: Filter transformation configuration
                      properties:
                        condition:
                          description: Condition is a JSONPath expression that must
                            evaluate to true
                          type: string
                      required:
                      - condition
                      type: object
                    flatten:
                      description: Flatten transformation configuration
                      properties:
                        field:
                          description: Field is the JSONPath to the array field to
                            flatten
                          type: string
                      required:
                      - field
                      type: object
                    mask:
                      description: Mask transformation configuration
                      properties:
                        fields:
                          description: Fields is a list of JSONPath expressions to
                            mask
                          items:
                            type: string
                          type: array
                        keepLength:
                          description: KeepLength keeps the original length of the
                            value
                          type: boolean
                        maskChar:
                          description: 'MaskChar is the character to use for masking
                            (default: *)'
                          type: string
                      required:
                      - fields
                      type: object
                    remove:
                      description: Remove transformation configuration
                      properties:
                        fields:
                          description: Fields is a list of JSONPath expressions to
                            remove
                          items:
                            type: string
                          type: array
                      required:
                      - fields
                      type: object
                    router:
                      description: Router transformation configuration
                      properties:
                        routes:
                          description: Routes is a list of routing rules
                          items:
                            description: RouteRule defines a routing rule
                            properties:
                              condition:
                                description: Condition is a JSONPath expression that
                                  must evaluate to true
                                type: string
                              sink:
                                description: Sink is the sink configuration for this
                                  route
                                properties:
                                  kafka:
                                    description: Kafka sink configuration
                                    properties:
                                      brokers:
                                        description: Brokers is a list of Kafka broker
                                          addresses
                                        items:
                                          type: string
                                        type: array
                                      brokersSecretRef:
                                        description: BrokersSecretRef references a
                                          Kubernetes secret for brokers (comma-separated)
                                        properties:
                                          key:
                                            description: Key in the secret to read
                                              the value from
                                            type: string
                                          name:
                                            description: Name of the secret
                                            type: string
                                          namespace:
                                            description: Namespace of the secret (optional,
                                              defaults to the same namespace as DataFlow)
                                            type: string
                                        required:
                                        - key
                                        - name
                                        type: object
                                      sasl:
                                        description: SASL configuration
                                        properties:
                                          mechanism:
                                            description: 'Mechanism: plain, scram-sha-256,
                                              scram-sha-512'
                                            type: string
                                          password:
                                            description: Password (optional if PasswordSecretRef
                                              is provided)
                                            type: string
                                          passwordSecretRef:
                                            description: PasswordSecretRef references
                                              a Kubernetes secret for password
                                            properties:
                                              key:
                                                description: Key in the secret to
                                                  read the value from
                                                type: string
                                              name:
                                                description: Name of the secret
                                                type: string
                                              namespace:
                                                description: Namespace of the secret
                                                  (optional, defaults to the same
                                                  namespace as DataFlow)
                                                type: string
                                            required:
                                            - key
                                            - name
                                            type: object
                                          username:
                                            description: Username (optional if UsernameSecretRef
                                              is provided)
                                            type: string
                                          usernameSecretRef:
                                            description: UsernameSecretRef references
                                              a Kubernetes secret for username
                                            properties:
                                              key:
                                                description: Key in the secret to
                                                  read the value from
                                                type: string
                                              name:
                                                description: Name of the secret
                                                type: string
                                              namespace:
                                                description: Namespace of the secret
                                                  (optional, defaults to the same
                                                  namespace as DataFlow)
                                                type: string
                                            required:
                                            - key
                                            - name
                                            type: object
                                        required:
                                        - mechanism
                                        type: object
                                      tls:
                                        description: TLS configuration
                                        properties:
                                          caFile:
                                            description: CAFile path to CA certificate
                                              file
                                            type: string
                                          caSecretRef:
                                            description: CASecretRef references a
                                              Kubernetes secret for CA certificate
                                            properties:
                                              key:
                                                description: Key in the secret to
                                                  read the value from
                                                type: string
                                              name:
                                                description: Name of the secret
                                                type: string
                                              namespace:
                                                description: Namespace of the secret
                                                  (optional, defaults to the same
                                                  namespace as DataFlow)
                                                type: string
                                            required:
                                            - key
                                            - name
                                            type: object
                                          certFile:
                                            description: CertFile path to certificate
                                              file
                                            type: string
                                          certSecretRef:
                                            description: CertSecretRef references
                                              a Kubernetes secret for certificate
                                            properties:
                                              key:
                                                description: Key in the secret to
                                                  read the value from
                                                type: string
                                              name:
                                                description: Name of the secret
                                                type: string
                                              namespace:
                                                description: Namespace of the secret
                                                  (optional, defaults to the same
                                                  namespace as DataFlow)
                                                type: string
                                            required:
                                            - key
                                            - name
                                            type: object
                                          insecureSkipVerify:
                                            description: InsecureSkipVerify skips
                                              certificate verification
                                            type: boolean
                                          keyFile:
                                            description: KeyFile path to key file
                                            type: string
                                          keySecretRef:
                                            description: KeySecretRef references a
                                              Kubernetes secret for key
                                            properties:
                                              key:
                                                description: Key in the secret to
                                                  read the value from
                                                type: string
                                              name:
                                                description: Name of the secret
                                                type: string
                                              namespace:
                                                description: Namespace of the secret
                                                  (optional, defaults to the same
                                                  namespace as DataFlow)
                                                type: string
                                            required:
                                            - key
                                            - name
                                            type: object
                                        type: object
                                      topic:
                                        description: Topic to write to
                                        type: string
                                      topicSecretRef:
                                        description: TopicSecretRef references a Kubernetes
                                          secret for topic
                                        properties:
                                          key:
                                            description: Key in the secret to read
                                              the value from
                                            type: string
                                          name:
                                            description: Name of the secret
                                            type: string
                                          namespace:
                                            description: Namespace of the secret (optional,
                                              defaults to the same namespace as DataFlow)
                                            type: string
                                        required:
                                        - key
                                        - name
                                        type: object
                                    required:
                                    - brokers
                                    - topic
                                    type: object
                                  postgresql:
                                    description: PostgreSQL sink configuration
                                    properties:
                                      autoCreateTable:
                                        description: AutoCreateTable automatically
                                          creates the table if it doesn't exist
                                        type: boolean
                                      batchSize:
                                        description: BatchSize for batch inserts
                                        format: int32
                                        type: integer
                                      connectionString:
                                        description: ConnectionString for PostgreSQL
                                          database
                                        type: string
                                      connectionStringSecretRef:
                                        description: ConnectionStringSecretRef references
                                          a Kubernetes secret for connection string
                                        properties:
                                          key:
                                            description: Key in the secret to read
                                              the value from
                                            type: string
                                          name:
                                            description: Name of the secret
                                            type: string
                                          namespace:
                                            description: Namespace of the secret (optional,
                                              defaults to the same namespace as DataFlow)
                                            type: string
                                        required:
                                        - key
                                        - name
                                        type: object
                                      table:
                                        description: Table to write to
                                        type: string
                                      tableSecretRef:
                                        description: TableSecretRef references a Kubernetes
                                          secret for table name
                                        properties:
                                          key:
                                            description: Key in the secret to read
                                              the value from
                                            type: string
                                          name:
                                            description: Name of the secret
                                            type: string
                                          namespace:
                                            description: Namespace of the secret (optional,
                                              defaults to the same namespace as DataFlow)
                                            type: string
                                        required:
                                        - key
                                        - name
                                        type: object
                                    required:
                                    - connectionString
                                    - table
                                    type: object
                                  trino:
                                    description: Trino sink configuration
                                    properties:
                                      autoCreateTable:
                                        description: AutoCreateTable automatically
                                          creates the table if it doesn't exist
                                        type: boolean
                                      batchSize:
                                        description: BatchSize for batch inserts
                                        format: int32
                                        type: integer
                                      catalog:
                                        description: Catalog to use
                                        type: string
                                      catalogSecretRef:
                                        description: CatalogSecretRef references a
                                          Kubernetes secret for catalog name
                                        properties:
                                          key:
                                            description: Key in the secret to read
                                              the value from
                                            type: string
                                          name:
                                            description: Name of the secret
                                            type: string
                                          namespace:
                                            description: Namespace of the secret (optional,
                                              defaults to the same namespace as DataFlow)
                                            type: string
                                        required:
                                        - key
                                        - name
                                        type: object
                                      keycloak:
                                        description: Keycloak authentication configuration
                                        properties:
                                          clientID:
                                            description: ClientID is the OAuth2 client
                                              ID
                                            type: string
                                          clientIDSecretRef:
                                            description: ClientIDSecretRef references
                                              a Kubernetes secret for client ID
                                            properties:
                                              key:
                                                description: Key in the secret to
                                                  read the value from
                                                type: string
                                              name:
                                                description: Name of the secret
                                                type: string
                                              namespace:
                                                description: Namespace of the secret
                                                  (optional, defaults to the same
                                                  namespace as DataFlow)
                                                type: string
                                            required:
                                            - key
                                            - name
                                            type: object
                                          clientSecret:
                                            description: ClientSecret is the OAuth2
                                              client secret (optional if ClientSecretSecretRef
                                              is provided)
                                            type: string
                                          clientSecretSecretRef:
                                            description: ClientSecretSecretRef references
                                              a Kubernetes secret for client secret
                                            properties:
                                              key:
                                                description: Key in the secret to
                                                  read the value from
                                                type: string
                                              name:
                                                description: Name of the secret
                                                type: string
                                              namespace:
                                                description: Namespace of the secret
                                                  (optional, defaults to the same
                                                  namespace as DataFlow)
                                                type: string
                                            required:
                                            - key
                                            - name
                                            type: object
                                          password:
                                            description: Password for password grant
                                              (optional if PasswordSecretRef is provided)
                                            type: string
                                          passwordSecretRef:
                                            description: PasswordSecretRef references
                                              a Kubernetes secret for password
                                            properties:
                                              key:
                                                description: Key in the secret to
                                                  read the value from
                                                type: string
                                              name:
                                                description: Name of the secret
                                                type: string
                                              namespace:
                                                description: Namespace of the secret
                                                  (optional, defaults to the same
                                                  namespace as DataFlow)
                                                type: string
                                            required:
                                            - key
                                            - name
                                            type: object
                                          realm:
                                            description: Realm is the Keycloak realm
                                              name
                                            type: string
                                          realmSecretRef:
                                            description: RealmSecretRef references
                                              a Kubernetes secret for realm name
                                            properties:
                                              key:
                                                description: Key in the secret to
                                                  read the value from
                                                type: string
                                              name:
                                                description: Name of the secret
                                                type: string
                                              namespace:
                                                description: Namespace of the secret
                                                  (optional, defaults to the same
                                                  namespace as DataFlow)
                                                type: string
                                            required:
                                            - key
                                            - name
                                            type: object
                                          serverURL:
                                            description: ServerURL is the Keycloak
                                              server URL (e.g., https://keycloak.example.com/auth)
                                            type: string
                                          serverURLSecretRef:
                                            description: ServerURLSecretRef references
                                              a Kubernetes secret for Keycloak server
                                              URL
                                            properties:
                                              key:
                                                description: Key in the secret to
                                                  read the value from
                                                type: string
                                              name:
                                                description: Name of the secret
                                                type: string
                                              namespace:
                                                description: Namespace of the secret
                                                  (optional, defaults to the same
                                                  namespace as DataFlow)
                                                type: string
                                            required:
                                            - key
                                            - name
                                            type: object
                                          token:
                                            description: |-
                                              Token is a long-lived OAuth2 token obtained from Keycloak (optional if TokenSecretRef is provided)
                                              If provided, this token will be used directly instead of OAuth2 flow
                                            type: string
                                          tokenSecretRef:
                                            description: |-
                                              TokenSecretRef references a Kubernetes secret for OAuth2 token
                                              If provided, this token will be used directly instead of OAuth2 flow
                                            properties:
                                              key:
                                                description: Key in the secret to
                                                  read the value from
                                                type: string
                                              name:
                                                description: Name of the secret
                                                type: string
                                              namespace:
                                                description: Namespace of the secret
                                                  (optional, defaults to the same
                                                  namespace as DataFlow)
                                                type: string
                                            required:
                                            - key
                                            - name
                                            type: object
                                          username:
                                            description: Username for password grant
                                              (optional if UsernameSecretRef is provided)
                                            type: string
                                          usernameSecretRef:
                                            description: UsernameSecretRef references
                                              a Kubernetes secret for username
                                            properties:
                                              key:
                                                description: Key in the secret to
                                                  read the value from
                                                type: string
                                              name:
                                                description: Name of the secret
                                                type: string
                                              namespace:
                                                description: Namespace of the secret
                                                  (optional, defaults to the same
                                                  namespace as DataFlow)
                                                type: string
                                            required:
                                            - key
                                            - name
                                            type: object
                                        required:
                                        - clientID
                                        - realm
                                        - serverURL
                                        type: object
                                      schema:
                                        description: Schema to use
                                        type: string
                                      schemaSecretRef:
                                        description: SchemaSecretRef references a
                                          Kubernetes secret for schema name
                                        properties:
                                          key:
                                            description: Key in the secret to read
                                              the value from
                                            type: string
                                          name:
                                            description: Name of the secret
                                            type: string
                                          namespace:
                                            description: Namespace of the secret (optional,
                                              defaults to the same namespace as DataFlow)
                                            type: string
                                        required:
                                        - key
                                        - name
                                        type: object
                                      serverURL:
                                        description: ServerURL is the Trino server
                                          URL (e.g., http://trino:8080)
                                        type: string
                                      serverURLSecretRef:
                                        description: ServerURLSecretRef references
                                          a Kubernetes secret for server URL
                                        properties:
                                          key:
                                            description: Key in the secret to read
                                              the value from
                                            type: string
                                          name:
                                            description: Name of the secret
                                            type: string
                                          namespace:
                                            description: Namespace of the secret (optional,
                                              defaults to the same namespace as DataFlow)
                                            type: string
                                        required:
                                        - key
                                        - name
                                        type: object
                                      table:
                                        description: Table to write to
                                        type: string
                                      tableSecretRef:
                                        description: TableSecretRef references a Kubernetes
                                          secret for table name
                                        properties:
                                          key:
                                            description: Key in the secret to read
                                              the value from
                                            type: string
                                          name:
                                            description: Name of the secret
                                            type: string
                                          namespace:
                                            description: Namespace of the secret (optional,
                                              defaults to the same namespace as DataFlow)
                                            type: string
                                        required:
                                        - key
                                        - name
                                        type: object
                                    required:
                                    - catalog
                                    - schema
                                    - serverURL
                                    - table
                                    type: object
                                  type:
                                    description: 'Type of sink: kafka, postgresql'
                                    type: string
                                required:
                                - type
                                type: object
                            required:
                            - condition
                            - sink
                            type: object
                          type: array
                      required:
                      - routes
                      type: object
                    select:
                      description: Select transformation configuration
                      properties:
                        fields:
                          description: Fields is a list of JSONPath expressions to
                            select
                          items:
                            type: string
                          type: array
                      required:
                      - fields
                      type: object
                    snakeCase:
                      description: SnakeCase transformation configuration
                      properties:
                        deep:
                          description: Deep indicates whether to convert nested objects
                            recursively
                          type: boolean
                      type: object
                    timestamp:
                      description: Timestamp transformation configuration
                      properties:
                        fieldName:
                          description: 'FieldName is the name of the timestamp field
                            (default: created_at)'
                          type: string
                        format:
                          description: 'Format is the timestamp format (default: RFC3339)'
                          type: string
                      type: object
                    type:
                      description: 'Type of transformation: timestamp, flatten, filter,
                        mask, router, select, remove, snakeCase, camelCase'
                      type: string
                  required:
                  - type
                  type: object
                type: array
            required:
            - sink
            - source
            type: object
          status:
            description: DataFlowStatus defines the observed state of DataFlow
            properties:
              errorCount:
                description: ErrorCount is the number of errors encountered
                format: int64
                type: integer
              lastProcessedTime:
                description: LastProcessedTime is the timestamp of the last processed
                  message
                format: date-time
                type: string
              message:
                description: Message provides additional information about the status
                type: string
              phase:
                description: Phase represents the current phase of the data flow
                type: string
              processedCount:
                description: ProcessedCount is the number of processed messages
                format: int64
                type: integer
            type: object
        type: object
    served: true
    storage: true
    subresources:
      status: {}
